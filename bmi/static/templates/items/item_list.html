{% extends "base.html" %}
{% load static %}

{% block title %}
  Buy my items
{% endblock %}

{% block content %}
  <form class="filter" method="get">
    {{ filterset.form.as_p }}
    <button type="submit">Filter</button>
  </form>
  <form class="buy-form" method="post" action="{% url 'purchases:buy' %}">
    {% csrf_token %}
    <div class="item-list">
      {% for item in filterset.qs %}
        <div class="item">
          <div><b>{{ item.name }}</b> - <a href="{% url 'items:detail' item.id %}">detail...</a></div>
          <div>{{ item.price }}</div>
          <div>{{ item.currency|upper }}</div>
        </div>
        <input class="form-input" type="checkbox" name="items" value="{{ item.id }}">
      {% endfor %}
    </div>
    <button class="buy" type="submit">Buy</button>
  </form>
  <form class="discount-form">
    <input id="coupon-code" type="text" placeholder="Enter coupon code">
    <button id="apply-coupon" type="button">Apply Coupon</button>
  </form>
{% endblock %}
